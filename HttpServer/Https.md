# HTPPS

## HTTP和HTTPS的区别
- `http`是一种广泛使用的网络协议，用于浏览器和服务器之间的请求和答应。它基于`TCP`协议，用于WWW服务器传输超文本到本地浏览器。但由于`HTTP`协议传输的数据是明文格式的，因此发送隐私信息是存在着安全风险。

- `https`是在`http`的基础上添加SSL层已实现更高级别的安全保障，其传输逻辑如下图所示。

    ![](imgs/https.png)

## HTTPS中的一些概念

- 公钥和私钥

    公钥和私钥由服务器产生，公钥对所有人公开，当客户端发起连接请求时，服务器会把公钥给它返回回去。公钥类似一把锁，谁都可以取用，但是只有私钥这把钥匙可以打开。客户端使用的时候，会把自己创建的会话秘钥通过公钥进行加密(上锁)然后发给服务端，因为没有私钥，及时传输过程中被拦截了，也无法解密。服务器拿到后，就可以使用私钥进行解密(开锁)，拿到客户端发来的会话密钥。

- 会话秘钥

    用于服务端和客户端的加密通信，能加密也能解密，发送数据前，先通过会话密钥进行加密，然后发送，接收端接收到数据后再通过会话秘钥进行解密。

- 对称密钥加密和非对称密钥加密

    公钥私钥的使用时非对称的，而会话密钥的使用时对称的。

    对称指的是加密解密采用同一个密钥，非对称指的是加密解密采用不同的密钥。如果再传输会话秘钥时使用的时对称密钥加密，则需要把这把秘钥也发给服务端，这样服务端才能解密，但是被拦截后黑客同样也能解密。非对称密钥加密保证了会话密钥传给服务器的安全性。在会话过程中，双方已经各持有一把会话秘钥，因此不再需要使用非对称密钥加密，效率更高。

    在`https`中，既采用了对称加密，也采用了非对称加密。称之为混合加密。

- HTTPS证书

    上面的加密并不能保证信息安全，比如客户端发送请求给服务器后，服务器返回了它的公钥，但被中间人截获了。中间人可以用自己的公钥冒充服务器的公钥发给客户端，客户端就会误以为是服务器发来的，并使用这个公钥对会话秘钥进行加密并发送。

    服务器向客户端发送公钥的同时会携带自己的证书，收到后客户端就可以向数字证书认证机构去验证数字签名等信息的真实性。

    ![](imgs/certificate.png)


